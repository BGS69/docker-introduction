<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Introduction to Docker - Catalyst Training</title>

        <meta name="author" content="Catalyst">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/catalyst.css" id="theme">
        <link rel="stylesheet" href="css/font-awesome.css">

        <!-- For syntax highlighting -->
        <!-- <link rel="stylesheet" href="lib/css/zenburn.css"> -->
        <link rel="stylesheet" href="lib/css/catalyst-syntax.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <style>
            /* Add the ability to omit slides from the printed version (has to be after the print include)*/
            @media print {
                .reveal .slides section.no-print {
                    display: none !important;
                    visibility: hidden !important;
                }
            }
        </style>
        <style>
            .reveal h1, .reveal h2, .reveal h3 {
                color: #ba2025;
            }
        </style>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->

        <!-- Please put any custom styles here -->
        <style>

        </style>
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <!-- Cover slide -->
                <section>
                    <h1 class="catalyst-logo">Catalyst</h1>
                    <h3>Intro to Docker</h3>
                    <p class="small-text">
                        Presented by <a href="#">Donovan Jones</a>
                    </p>
                </section>

                <section>
                    <h3>This course</h3>
                    <ul>
                        <li>Makes use of official docker docs</li>
                        <li>Largely hands on command line</li>
                        <li>Assumes no prior docker knowledge</li>
                        <li>Assumes familiarity with the linux shell</li>
                        <li>Assumes we are using ubuntu (trusty)</li>
                        <li>Has some helper scripts</li>
                    </ul>
                </section>

                <section>
                    <h3>Aims</h3>
                    <ul>
                        <li>Understand how to use docker on the command line</li>
                        <li>Understand where docker can be used</li>
                        <li>Appreciation of the larger ecosystem</li>
                        <li>Get peole thinking about where they could use docker</li>
                        <li>Get people using the technology</li>
                    </ul>
                </section>

                <section>
                    <h3>Why docker?</h3>
                    <ul>
                        <li>Lightweight compared to traditional virtualization</li>
                        <li>Consistency across dev/test/prod</li>
                        <li>Easy to modify, update and scale</li>
                        <li>Portable</li>
                        <li>Dependency encapsulation and decoupling</li>
                        <li>Enables (requires?) new workflows</li>
                    </ul>
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                    <h2>Lightweight</h2>
                    <img src="img/docker.png" alt="">
                </section>

                <section>
                    <h3>Portability</h3>
                    <ul>
                        <li>Any modern Linux (RHEL, CentOS, Ubuntu LTS, etc.)</li>
                        <li>Lightweight Docker optimized Linux distributions (CoreOS, Project Atomic, RancherOS, etc.)</li>
                        <li>Private clouds (OpenStack, Vmware)</li>
                        <li>Public clouds (AWS, Azure, Rackspace, Google)</li>
                    </ul>
                </section>

                <section>
                    <h3>Decoupling</h3>
                    <ul>
                        <li>Application stack is no longer coupled to machine it is running on</li>
                        <li>Allows a service to have the most appropriate stack without needing to consider conflicts with and dependencies of other services (eg python versions)</li>
                        <li>Services can be run in the most optimal location for a given organisation</li>
                        <li>Services can be upgraded independently</li>
                        <li>Services boundaries can define areas of responsibility</li>
                        <li>Configuration is coupled with the application</li>
                    </ul>
                </section>

                <section>
                    <h3>Understanding docker</h3>
                    <p><a href="https://docs.docker.com/introduction/understanding-docker/">https://docs.docker.com/introduction/understanding-docker/</a> <a href="http://webcache.googleusercontent.com/search?q=cache:https://docs.docker.com/introduction/understanding-docker/">(cache)</a></p>
                </section>

                <section>
                    <h3>Containers and Images</h3>
                    <ul>
                        <li>Images</li>
                            <ul>
                                <li>Read only template for creating containers</li>
                                <li>Stored in a registry</li>
                                <li>Built by you or others</li>
                            </ul>
                        <li>Containers</li>
                            <ul>
                                <li>Based on an image</li>
                                <li>An actual running instance</li>
                                <li>Read write</li>
                                <li>Encasulates your application and its dependencies</li>
                            </ul>
                    </ul>
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                    <h2>Containers and Images</h2>
                    <img src="http://alandargan.com/wp-content/uploads/2014/11/Docker2.png" alt="">
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                    <h2>Simple Workflow</h2>
                    <img src="http://blog.octo.com/wp-content/uploads/2014/01/Diapositive1.png" alt="">
                </section>

                <section>
                    <h3>Scripts</h3>
                    <ul>
                        <li>Designed to be run on trusty training machines</li>
                        <li>docker-setup.sh - ensures required software is installed</li>
                        <li>user-setup.sh - sets up environment variables for our user</li>
                        <li>docker-course.sh - list or run the course commands</li>
                    </ul>
                </section>

                <section>
                    <h3>Setup</h3>
                    <p>lets setup our environment now</p>
                    <pre><code data-trim contenteditable>
cd docker-training
source ./user-setup.sh
                    </code></pre>
                </section>

                <section>
                    <h3>Course script</h3>
                    <p>By default this script outputs all the commands you will need to run</p>
                    <pre><code data-trim contenteditable>
$ sudo ./docker-course.sh -h

Usage: sudo ./docker-course.sh [OPTIONS]

    -h        this help
    -s        takes an integer, indicates that we should stop at this section
    -r        replay, runs all the commands without user input
    -i        interactive replay, requires keypresses to run commands
                    </code></pre>
                    <p>try it now</p>
                    <pre><code data-trim contenteditable>
sudo ./docker-course.sh -s 3
                    </code></pre>
                </section>

                <section>
                    <h3>1: Dockerizing applications</h3>
<a href="https://docs.docker.com/userguide/dockerizing/">https://docs.docker.com/userguide/dockerizing</a> <a href="http://webcache.googleusercontent.com/search?q=cache:https://docs.docker.com/userguide/dockerizing">(cache)</a>
                </section>

                <section>
                    <h3>2: Working with containers</h3>
<a href="https://docs.docker.com/userguide/usingdocker">https://docs.docker.com/userguide/usingdocker</a> <a href="http://webcache.googleusercontent.com/search?q=cache:https://docs.docker.com/userguide/usingdocker">(cache)</a>
                </section>

                <section>
                    <h3>3: Get started with images</h3>
<a href="https://docs.docker.com/userguide/dockerimages">https://docs.docker.com/userguide/dockerimages</a> <a href="http://webcache.googleusercontent.com/search?q=cache:https://docs.docker.com/userguide/dockerimages">(cache)</a>
                </section>

                <section>
                    <h3>4: Linking containers together</h3>
<a href="https://docs.docker.com/userguide/dockerlinks">https://docs.docker.com/userguide/dockerlinks</a> <a href="http://webcache.googleusercontent.com/search?q=cache:https://docs.docker.com/userguide/dockerlinks">(cache)</a>
                </section>

                <section>
                    <h3>5: Managing data in containers</h3>
<a href="https://docs.docker.com/userguide/dockervolumes">https://docs.docker.com/userguide/dockervolumes</a> <a href="http://webcache.googleusercontent.com/search?q=cache:https://docs.docker.com/userguide/dockervolumes">(cache)</a>
                </section>

                <section>
                    <h3>6: Get started with Docker Hub</h3>
<a href="https://docs.docker.com/userguide/dockerrepos">https://docs.docker.com/userguide/dockerrepos</a> <a href="http://webcache.googleusercontent.com/search?q=cache:https://docs.docker.com/userguide/dockerrepos">(cache)</a>
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                    <h2>Layering (via a Union file system)</h2>
                    <img src="https://assets.digitalocean.com/articles/docker_ecosystem/Container-Overview.png" alt="">
                </section>

                <section>
                <section>
                    <h3>7: Layers</h3>
                    <ul>
                        <li>dockviz</li>
                    <pre><code data-trim contenteditable>
sudo dockviz images --tree

sudo dockviz images -d | dot -Tpng -o images.png && eog images.png && rm images.png
sudo dockviz containers -d | dot -Tpng -o containers.png && eog containers.png && rm containers.png
                    </code></pre>
                    </ul>
                </section>

                <section>
                    <h3>7: Docker Diff</h3>
                    <pre><code data-trim contenteditable>
$ sudo docker run --name=sleepy_cori -it ubuntu:latest /bin/bash
root@e888e0fef39e:/# echo flubber > test.txt
root@e888e0fef39e:/# exit

$ sudo docker ps -l
CONTAINER ID IMAGE         COMMAND     CREATED        STATUS                    PORTS NAMES
e888e0fef39e ubuntu:latest "/bin/bash" 57 seconds ago Exited (0) 11 seconds ago       sleepy_cori

$ sudo docker restart sleepy_cori
sleepy_cori

$ sudo docker attach sleepy_cori
root@e888e0fef39e:/# 
                    </code></pre>
                </section>

                <section>
                    <h3>7: Docker Diff</h3>
                    <pre><code data-trim contenteditable>
root@e888e0fef39e:/# apt-get install mtr-tiny
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
mtr-tiny
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 41.7 kB of archives.
After this operation, 126 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu/ trusty/main mtr-tiny amd64 0.85-2 [41.7 kB]
Fetched 41.7 kB in 1s (38.4 kB/s)
Selecting previously unselected package mtr-tiny.
(Reading database ... 11528 files and directories currently installed.)
Preparing to unpack .../mtr-tiny_0.85-2_amd64.deb ...
Unpacking mtr-tiny (0.85-2) ...
Setting up mtr-tiny (0.85-2) ...
root@e888e0fef39e:/# exit
                    </code></pre>
                </section>

                <section>
                    <h3>7: Docker Diff</h3>
                    <pre><code data-trim contenteditable>
$ sudo docker ps -l
CONTAINER ID IMAGE         COMMAND     CREATED       STATUS                    PORTS NAMES
e888e0fef39e ubuntu:latest "/bin/bash" 2 minutes ago Exited (0) 25 seconds ago       sleepy_cori

$ sudo docker diff sleepy_cori | head
C /root
A /root/.bash_history
A /test.txt
C /tmp
C /usr
C /usr/bin
A /usr/bin/mtr
C /usr/share
C /usr/share/doc
A /usr/share/doc/mtr-tiny
                    </code></pre>
                </section>

                <section>
                    <h3>7: Docker Diff</h3>
                    <pre><code data-trim contenteditable>
$ sudo find /var/lib/docker/ -type f -name 'test.txt' -exec md5sum {} \;
185320c3e9298cdbde3320ec32144980  /var/lib/docker/aufs/diff/e888e0fef39e6f7f249f33f0475e891aaef899cca9ed0ea39d2524e5f06be792/test.txt

$ sudo docker restart sleepy_cori
sleepy_cori

$ sudo docker exec sleepy_cori md5sum test.txt
185320c3e9298cdbde3320ec32144980  test.txt
                    </code></pre>
                </section>

                <section>
                    <h3>7: Docker Diff what is AUFS?</h3>
                    <ul>
                        <li>Did you notice /var/lib/docker/aufs?</li>
                        <li><a href="http://aufs.sourceforge.net/">Advanced Multi Layered Unification Filesystem</a></li>
                    <pre><code data-trim contenteditable>
priority = []string{
"aufs",
"btrfs",
"devicemapper",
"vfs",
"overlayfs",
                    </code></pre>
                        <li>Details <a href="https://developerblog.redhat.com/2014/09/30/overview-storage-scalability-docker/">here</a></li>
                    </ul>
                </section>


                </section>

                <section>
                    <h3>8: More on Dockerfiles</h3>
                    <ul>
                        <li><a href="https://docs.docker.com/articles/dockerfile_best-practices/">Dockerfile Best Practices</a></li>
                        <li><a href="https://labs.ctl.io/dockerfile-entrypoint-vs-cmd/">ENTRYPOINT vs CMD</a></li>
                    </ul>
                </section>

                <section>
                    <h3>9: Base images</h3>
                    <ul>
                        <li>Size is a major consideration ... deploy times ...</li>
                        <li>FROM empty ...</li>
                        <li><a href="http://www.busybox.net/">Busybox</a> - 5.6 MB, no package manager</li>
                        <li><a href="https://www.alpinelinux.org/">Alpine Linux</a> - distribution of choice for minimal containers - 5MB with a package manager</li>
                        <li><a href="https://hub.docker.com/_/debian/">Debian</a> - Reccomended by Docker, smaller than Ubuntu - 85MB</li>
                        <li><a href="https://hub.docker.com/_/ubuntu/">Ubuntu</a> - Commonly used but quite big</li>
                        <li>Language images (<a href="https://hub.docker.com/_/golang/">golang</a>, <a href="https://hub.docker.com/_/python/">python</a> etc.) - Seem to be mostly based on Debian</li>
                        <li>See <a href="http://www.blang.io/2015/04/18/how-to-build-the-smallest-docker-containers.html">1</a>, <a href="http://www.livewyer.com/blog/2015/02/24/slimming-down-your-docker-containers-alpine-linux">2</a></li>
                    </ul>
                </section>

                <section>
                <section>
                    <h3>8: Docker networking</h3>
                    <img src="http://www.linuxjournal.com/files/linuxjournal.com/ufiles/imagecache/large-550px-centered/u1002061/11833f1.png" alt="Docker networking">
                </section>

                <section>
                    <h3>8: Docker networking</h3>
                    <ul>
                        <li>docker0 virtual bridge</li>
                        <li>172.17.42.1/16 by default</li>
                        <li>Part of the 172.16.0.0/12 RFC 1918 space</li>
                        <li>Sets up virtual ether net ports on the host (eg veth31a763b)</li>
                        <li>Sets up a Docker Chain in iptables</li>
                        <li>Mounts hosts /etc/resolv.conf and /etc/hosts</li>
                    </ul>
                </section>
                <section>
                    <h3>8: Docker networking</h3>
                    <pre><code data-trim contenteditable>
# on host
$ sudo iptables -L
$ sudo ip addr
$ sudo cat $(sudo docker exec -it stoic_ramanujan findmnt | grep resolv | awk -F'[][]' '{ print $2 }')
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 192.168.2.92
search wgtn.cat-it.co.nz lan
                    </code></pre>
                </section>
                <section>
                    <h3>8: Docker networking - Random fact</h3>
                    <pre><code data-trim contenteditable>
$ sudo docker exec -it stoic_ramanujan findmnt | grep resolv | awk -F'[' '{ print $2 }' | tr -d ']' | sed -n l
/var/lib/docker/containers/f1911991f55e1c62d687a2e25caf6ee229f77585c9\
47053d61f48adf7f4ccb1c/resolv.conf\r$
$ sudo docker exec -it stoic_ramanujan findmnt | grep resolv | awk -F'[][]' '{ print $2 }' | sed -n l
/var/lib/docker/containers/f1911991f55e1c62d687a2e25caf6ee229f77585c9\
47053d61f48adf7f4ccb1c/resolv.conf$
                    </code></pre>
                </section>
                </section>

                <section>
                    <h3>Some Concepts</h3>
                    <ul>
                        <li><a href="http://radar.oreilly.com/2015/06/an-introduction-to-immutable-infrastructure.html">Immutable infrastructure</a></li>
                        <li><a href="https://blog.engineyard.com/2014/pets-vs-cattle">Cattle vs pets</a></li>
                        <li><a href="http://martinfowler.com/bliki/SnowflakeServer.html">Snowflake Servers</a> vs. <a href="http://martinfowler.com/bliki/PhoenixServer.html">Phoenix Servers</a></li>
                    </ul>
                </section>

                <section>
                    <h3>Immutable architecture</h3>
                    <ul>
                        <li>Phoenix servers</li>
                        <li>The environment is defined in code</li>
                        <li>If you need to change _anything_ you create a new instance and destroy the old one</li>
                        <li>Docker makes it much more likely you will work in this way</li>
                        <li>Procedural vs Declarative</li>
                    </ul>
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                    <h2>Immutable Architecture</h2>
                    <img src="http://s.radar.oreilly.com/wp-files/2/2015/06/immutable_infrastructure.gif" alt="Immutable Architecture" height="600" width="800">
                </section> 

                <section>
                    <h3>Microservices</h3>
                    <p>Cockcrofts definition: Loosely coupled service oriented architecture with bounded contexts</p>
                    <p>Eric Brewers: Microservice boundaries are language boundaries and team boundaries</p>
                </section>

                <section>
                    <h3>Microservices</h3>
                    <ul>
                        <li>A suite of small services, each running in its own process and communicating with lightweight mechanisms</li>
                        <li>Services can be implemented with entirely different stacks</li>
                        <li>Services can be developed, maintained, and updated independently</li>
                        <li>Often use well defined REST APIs to communicate</li>
                        <li>If a message bus is used then its likely to be lightweight (ZeroMQ vs ESB)</li>
                    </ul>
                </section>

                <section>
                    <h3>Microservices</h3>
                    <ul>
                        <li>Often use a DevOps approach (you build it you run it)</li>
                        <li>Smart endpoints and dumb pipes</li>
                        <li>Decentralized Data Management with eventual consistency</li>
                        <li>Continuous integration and delivery</li>
                        <li>Design for failure (optimize MTTR)</li>
                    </ul>
                </section>

                <section>
                    <h3><a href="https://www.nginx.com/blog/microservices-at-netflix-architectural-best-practices/">Microservices best practices</a></h3>
                    <ul>
                        <li>Create a Separate Data Store for Each Microservice</li>
                        <li>Keep Code at a Similar Level of Maturity</li>
                        <li>Do a Separate Build for Each Microservice</li>
                        <li>Deploy in Containers</li>
                        <li>Treat Servers as Stateless</li>
                    </ul>
                </section>

                 <!-- Large image slide -->
                <section class="image-slide">
                    <h2>CAP</h2>
                    <img src="http://digbigdata.com/wp-content/uploads/2013/05/media_httpfarm5static_mevIk.png" alt="CAP" height="600" width="800">
                </section>

                <section>
                    <h3>Containers and Microservices</h3>
                    <ul>
                        <li>Containers do not necessarily map to service or application boundaries</li>
                        <li>A service will often contain more than one container</li>
                        <li>A container is more like an OO Class - Brendan Burns @ Dockercon 2015</li>
                        <li>A container is a persistent object - Eric Brewer @ OSCon 2015</li>
                    </ul>
                </section>

                <section>
                    <h3>Containers and Microservices: Requirements</h3>
                    <ul>
                        <li>Sharing among containers (eg filesystems)</li>
                        <li>Atomic co-scheduling of containers</li>
                        <li>Parameterization of containers</li>
                    </ul>
                </section>

                <section>
                    <h3>Microservices - Resources</h3>
                    <ul>
                        <li><a href="http://martinfowler.com/articles/microservices.html">Microservices - Martin Fowler</a></li>
                        <li><a href="https://www.nginx.com/blog/microservices-at-netflix-architectural-best-practices/">Adopting Microservices at Netflix: Lessons for Architectural Design</a></li>
                        <li><a href="https://www.nginx.com/blog/adopting-microservices-at-netflix-lessons-for-team-and-process-design/">Adopting Microservices at Netflix: Lessons for Team and Process Design</a></li>
                        <li><a href="https://www.youtube.com/watch?v=e4jr6Ihz4Qo">Kubernetes: The Path to Cloud Native - Eric Brewer - OSCon 2105</a></li>
                        <li>Nginx blog Building Microservices series: <a href="https://www.nginx.com/blog/introduction-to-microservices/">1</a>,<a href="https://www.nginx.com/blog/building-microservices-using-an-api-gateway">2</a>,<a href="https://www.nginx.com/blog/building-microservices-inter-process-communication/">3</a></li>
                    </ul>
                </section>

                <section>
                    <h3>Containers: Where to start?</h3>
                    <ul>
                        <li>Building binaries</li>
                        <li>Prototypes you can share</li>
                        <li>Tutorials</li>
                        <li>Those small snowflakes</li>
                        <li>Build new functionality as microservices</li>
                        <li>Existing components that are already largely independent</li>
                        <li>Mix and match, containerise the bits that make sense</li>
                    </ul>
                </section>

                <section>
                    <h3>Examples</h3>
                    <ul>
                        <li><a href="https://blog.docker.com/2015/07/docker-three-ways-devops-3/">Distributing (scientific) data</a></li>
                        <li><a href="https://github.com/VISIONAI/clouddream">Distributing clouddream</a></li>
                        <li><a href="https://github.com/CenturyLinkLabs/golang-builder">Compiling go</a></li>
                    </ul>
                </section>

                 <!-- Large image slide -->
                <section class="image-slide">
                    <h2>Bosch Dreaming</h2>
                    <a href="img/Hieronymus_Bosch_003.jpg"><img src="img/Hieronymus_Bosch_003.jpg" alt="Bosch Dream" height="600" width="800"></a>
                </section>

                <!-- Slide with list items (list items are displayed at once) -->
                <section>
                    <h3>Docker ecosystem</h3>
                    <ul>
                        <li>An explosion of tools</li>
                        <li>Hard to keep up</li>
                        <li>Lets have a quick look</li>
                    </ul>
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                    <h2>Docker ecosystem</h2>
                    <img src="img/docker-ecosystem.png" alt="Docker Ecosystem" height="600" width="800">
                </section>

                <section>
                    <h3>Docker ecosystem - Host OS</h3>
                    <p>Lightweight operating systems designed to run containers</p>
                    <ul>
                        <li><a href="https://coreos.com/">CoreOS</a> (systemd)</li>
                        <li><a href="http://www.projectatomic.io/">Project Atomic</a> (cut down RHEL)</li>
                        <li><a href="http://rancher.com/">Rancher</a> (Dockers all the way down)</li>
                        <li><a href="http://boot2docker.io/">boot2docker</a> (for windows/mac devs)</li>
                        <li><a href="https://developer.ubuntu.com/en/snappy/">Snappy Ubuntu Core</a> (similar ideas for phones, embedded and IoT)</li>
                    </ul>
                </section>

                <section>
                    <h3>Docker compose</h3>
                    <ul>
                        <li>Written in python rather than go like most of docker</li>
                        <li>Comparable to vagrant</li>
                        <li>New lib written in go called <a href="http://rancher.com/our-journey-with-docker-compose-and-the-introduction-of-libcompose/">libcompose</a></li>
                    </ul>

                </section>

                <section>
                    <h3>8: Docker compose</h3>
                    <a href="https://docs.docker.com/compose/">Overview of Docker Compose</a> <a href="http://webcache.googleusercontent.com/search?q=cache:https://docs.docker.com/compose/">(cache)</a>
                </section>

                <section>
                    <h3>Kubernetes</h3>
                    <ul>
                        <li>Started by google</li>
                        <li>Includes people who worked on borg</li>
                        <li>Open source project</li>
                        <li>Cloud Native Computing Foundation</li>
                    </ul>
                </section>

                <section>
                    <h3><a href="http://blog.arungupta.me/kubernetes-design-patterns/">Pods</a></h3>
                    <ul>
                        <li>Co-locate containers</li>
                        <li>Shared volumes</li>
                        <li>IP address (important for port space and migration)</li>
                        <li>Unit of deployment and migration</li>
                        <li>Easy migration = high utilisation</li>
                        <li>Scale service by scaling pods</li>
                    </ul>
                </section>

                <section>
                    <h3><a href="http://blog.kubernetes.io/2015/06/the-distributed-system-toolkit-patterns.html">Patterns for Composite Containers</a></h3>
                    <ul>
                        <li>Sidecar containers (eg logger, git synchroniser)</li>
                        <li>Ambassador containers (local proxy to a service of unknown size)</li>
                        <li>Adapter containers (normalize and abstract different services)</li>
                    </ul>
                </section>

                <section>
                    <h3>Quick Kubernetes/docker compose demo</h3>
                    <p><a href="http://radar.oreilly.com/2015/07/set-up-kubernetes-with-a-docker-compose-one-liner.html">Set up Kubernetes with a docker compose one liner</a></p>
                </section>

                <!-- Slide with list items (list items are displayed at once) -->
                <section>
                    <h3>Security</h3>
                    <ul>
                        <li>How do you keep track of all the versions of all the software in all the containers?</li>
                        <li>The way to apply security updates is to update the base image, then rebuild your application image</li>
                        <li>If you release often then include an updated base every time you release (plus special releases for heartbleeds)</li>
                        <li>If you release infrequently then do base update releases of your app</li>
                    </ul>
                </section>

                <section>
                    <h3>Security - Useful links</h3>
                    <ul>
                        <li>How often do the official base images get updated? (details <a href="https://blog.docker.com/2015/06/understanding-official-repos-docker-hub/">here</a>)</li>
                        <li><a href="https://titanous.com/posts/docker-insecurity">Image signing</a> (see <a href="https://github.com/docker/notary">notary</a>)</li>
                        <li><a href="https://securityblog.redhat.com/2014/12/17/container-security-isolation-heaven-or-dependency-hell/">Level of isolation</a></li>
                        <li><a href="https://d3oypxn00j2a10.cloudfront.net/assets/img/Docker%20Security/WP_Intro_to_container_security_03.20.2015.pdf">Introduction to Container Security</a> Whitepaper</li>
                        <li><a href="https://blog.docker.com/2013/08/containers-docker-how-secure-are-they/">Fundametals</a> (old but informative)</li>
                        <li><a href="http://linux-audit.com/docker-security-best-practices-for-your-vessel-and-containers/">Best practices</a></li>
                    </ul>
                </section>

                <section>

                <section>
                    <h3>FAQ</h3>
                    <ul>
                        <li>See the <a href="https://wiki.wgtn.cat-it.co.nz/wiki/Docker/Cookbook">Docker cookbook</a> on the Catalyst wiki</li>
                        <li><a href="http://www.projectatomic.io/blog/2015/08/why-we-dont-let-non-root-users-run-docker-in-centos-fedora-or-rhel/">Why is sudo required?</a></li>
                        <li><a href="http://www.projectatomic.io/blog/2015/07/what-are-docker-none-none-images/">What are the &lt;none&gt;&lt;none&gt; images I see and how can I clean them up?</a></li>
                    </ul>
                </section>

                <section>
                    <h3>FAQ</h3>
                    <p>Whats the story with docker top pids?</p>
                    <pre><code data-trim contenteditable>
$ sudo docker top sleepy_cori
UID  PID   PPID C STIME TTY    TIME     CMD
root 30136 2379 0 12:29 pts/32 00:00:00 /bin/bash

$ pstree -s -p $(sudo docker top sleepy_cori | tail -1 | awk '{ print $2 }')
init(1)───docker(2379)───bash(30136)
                    </code></pre>
                </section>

                </section>

                <section>
                <section>
                    <h3>Next steps</h3>
                    <ul>
                        <li>Setup private registry</li>
                        <li>Students build custom "microservices"</li>
                        <li>Setup CoreOS on OpenStack</li>
                        <li>Deploy students microservices and create a www router service</li>
                        <li>Define service as a kubernetes</li>
                        <li>Scale and migrate pods (between OpenStack regions?)</li>
                        <li>Continuous delivery?</li>
                        <li>Help please!</li>
                    </ul>
                </section>
                <section>
                    <h3>Next steps</h3>
                    <p>What would you like to see in an intermediate docker course?</p>
                </section>
                </section>

                <section>
                    <h3>Kolla - OpenStack on Docker</h3>
                    <ul>
                        <li>Try setup Kolla ...</li>
                        <li><a href="http://hackersome.com/p/stackforge/kolla">http://hackersome.com/p/stackforge/kolla</a></li>
                        <li><a href="http://allthingsopen.com/2014/10/22/a-demonstration-of-kolla-docker-and-kubernetes-based-deployment-of-openstack-services-on-atomic/">http://allthingsopen.com/2014/10/22/a-demonstration-of-kolla-docker-and-kubernetes-based-deployment-of-openstack-services-on-atomic/</a></li>
                        <li><a href="https://github.com/stackforge/kolla">https://github.com/stackforge/kolla</a></li>
                        <li><a href="https://www.openstack.org/summit/openstack-paris-summit-2014/session-videos/presentation/docker-all-the-openstack-services">https://www.openstack.org/summit/openstack-paris-summit-2014/session-videos/presentation/docker-all-the-openstack-services</a></li>
                    </ul>
                </section>

                <section>
                    <h3>Sources</h3>
                    <p>Sources of the material used in this course:</p>
                    <ul>
                        <li><a href="https://docs.docker.com/">https://docs.docker.com/</a></li>
                        <li><a href="https://training.docker.com/introduction-to-docker">https://training.docker.com/introduction-to-docker</a></li>
                        <li><a href="http://alandargan.com/using-vagrant-docker/">http://alandargan.com/using-vagrant-docker/</a></li>
                        <li><a href="http://blog.octo.com/en/docker-registry-first-steps/">http://blog.octo.com/en/docker-registry-first-steps/</a></li>
                        <li><a href="https://www.digitalocean.com/community/tutorials/the-docker-ecosystem-an-introduction-to-common-components">https://www.digitalocean.com/community/tutorials/the-docker-ecosystem-an-introduction-to-common-components</a></li>
                        <li><a href="http://radar.oreilly.com/2015/07/set-up-kubernetes-with-a-docker-compose-one-liner.html">http://radar.oreilly.com/2015/07/set-up-kubernetes-with-a-docker-compose-one-liner.html</a></li>
                        <li><a href="http://www.linuxjournal.com/content/concerning-containers-connections-docker-networking">http://www.linuxjournal.com/content/concerning-containers-connections-docker-networking</a></li>
                    </ul>

                </section>


                <!-- Section title slide with big colour dot -->
                <section class="title-slide">
                    <h2 class="orange">Title goes here</h2>
                </section>

                <!-- Slide with a large title -->
                <section>
                    <h2>Large title</h2>
                    <aside class="notes">
                        This will only display in the notes window.
                    </aside>
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                    <h2>Title</h2>
                    <img src="img/800x400.gif" alt="">
                </section>

                <!-- Slide with list items (list items are displayed at once) -->
                <section>
                    <h3>List title</h3>
                    <ul>
                        <li>List item 1</li>
                        <li><i class="fa fa-camera-retro"></i>List item 2<img class="img-right" src="img/300x400.gif" alt="Placeholder image"></li>
                        <li class="fa fa-camera-retro">List item 3<img class="img-right" src="img/300x400.gif" alt="Placeholder image"></li>
                        <li>List item</li>
                    </ul>
                </section>

                <!-- Slide with list items (fragmented list items) -->
                <section>
                    <h3>Fragmented list</h3>
                    <ul>
                        <li class="fragment">List item</li>
                        <li class="fragment">List item</li>
                        <li class="fragment">List item <img class="img-centered" src="img/500x200.gif" alt="Placeholder image"></li>
                    </ul>
                </section>

                <!-- Slide with vertical slides underneath  -->
                <section>
                    <!-- Horizontal slide (This is one the same level as slide above) -->
                    <section class="title-slide banner-3">
                        <h2 class="yellow">Title (press down to see vertical slides)</h2>
                    </section>

                    <!-- The following slides are vertical, use down arrow key to navigate -->
                    <!-- Centered paragraph  -->
                    <section>
                        <h3>Paragraph</h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris at scelerisque eros. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam placerat posuere nibh vel dapibus.</p>
                    </section>

                    <!-- Blockquote  -->
                    <section>
                        <h3>Blockquote</h3>
                        <blockquote class="quotation-marks">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris at scelerisque eros. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam placerat posuere nibh vel dapibus.
                        </blockquote>
                    </section>

                    <!-- Nested lists-->
                    <section>
                        <h3>Nested lists</h3>
                            <ul>
                                <li>One</li>
                                <li>Two</li>
                                <li>Three</li>
                                    <ul>
                                        <li>Nested One</li>
                                        <li>Nested Two</li>
                                    </ul>
                            </ul>
                    </section>
                </section>

                <!-- Slide with code block -->
                <section>
                    <h3>Title</h3>
                    <p>Some text</p>
                    <pre><code data-trim contenteditable>
function linkify( selector ) {
    if( supports3DTransforms ) {

        var nodes = document.querySelectorAll( selector );

        for( var i = 0, len = nodes.length; i < len; i++ ) {
            var node = nodes[i];

            if( !node.className ) {
                node.className += ' roll';
            }
        }
    }
}
                    </code></pre>
                </section>

                <!-- Slide with full background image -->
                <section data-background="img/800x600.gif">
                    <h3>Image backgrounds</h3>
                </section>

                <!-- Slide with Catalyst slogan -->
                <section class="image-slide">
                    <img class="cat-slogan-image" src="css/theme/images/freedom-to-innovate.svg" alt="freedom to innovate">
                </section>
            </div>

            <div class="footer">
                <div class="scarf">
                    <div class="scarf-orange"></div>
                    <div class="scarf-yellow"></div>
                    <div class="scarf-blue"></div>
                    <div class="scarf-green"></div>
                </div>
                <div class="footer-inner">
                    <div>
                        <!-- NOTE: use only one of these. open-source-technologists is the standard -->
                        <p class="open-source-technologists">open source technologists</p>
                        <!-- <p class="freedom-to-innovate">freedom to innovate</p> -->
                    </div>
                </div>
            </div>
        </div>


        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/fade/none

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
